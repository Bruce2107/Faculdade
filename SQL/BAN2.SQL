CREATE TABLE public.bilhetes( codreserva integer NOT NULL, dtemissao date NOT NULL, codtrecho integer NOT NULL, codpass integer NOT NULL, preco integer NOT NULL, poltrona integer NOT NULL );
CREATE SEQUENCE public.bilhetes_codreserva_seq AS integer START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE CACHE 1;
ALTER SEQUENCE public.bilhetes_codreserva_seq OWNED BY public.bilhetes.codreserva;
CREATE TABLE public.empresas ( codempresa integer NOT NULL, nome character varying(50), autorizacao integer );
CREATE SEQUENCE public.empresas_codempresa_seq AS integer START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE CACHE 1;
ALTER SEQUENCE public.empresas_codempresa_seq OWNED BY public.empresas.codempresa;
CREATE TABLE public.passageiros ( codpass integer NOT NULL, nome character varying(50) NOT NULL, idade integer NOT NULL, passresponsavel integer );
CREATE SEQUENCE public.passageiros_codpass_seq AS integer START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE CACHE 1;
ALTER SEQUENCE public.passageiros_codpass_seq OWNED BY public.passageiros.codpass;
CREATE TABLE public.trechos ( codtrecho integer NOT NULL, codempresa integer, "cidadeorigem " character varying(30), cidadedestino character varying(30) );
CREATE SEQUENCE public.trechos_codtrecho_seq AS integer START WITH 1 INCREMENT BY 1 NO MINVALUE NO MAXVALUE CACHE 1;
ALTER SEQUENCE public.trechos_codtrecho_seq OWNED BY public.trechos.codtrecho;
ALTER TABLE ONLY public.bilhetes ALTER COLUMN codreserva SET DEFAULT nextval('public.bilhetes_codreserva_seq'::regclass);
ALTER TABLE ONLY public.empresas ALTER COLUMN codempresa SET DEFAULT nextval('public.empresas_codempresa_seq'::regclass);
ALTER TABLE ONLY public.passageiros ALTER COLUMN codpass SET DEFAULT nextval('public.passageiros_codpass_seq'::regclass);
ALTER TABLE ONLY public.trechos ALTER COLUMN codtrecho SET DEFAULT nextval('public.trechos_codtrecho_seq'::regclass);
INSERT INTO public.bilhetes (codreserva, dtemissao, codtrecho, codpass, preco, poltrona) VALUES (1, '2020-10-10', 1, 2, 55, 2);
INSERT INTO public.bilhetes (codreserva, dtemissao, codtrecho, codpass, preco, poltrona) VALUES (2, '2020-10-15', 2, 2, 42, 5);
INSERT INTO public.bilhetes (codreserva, dtemissao, codtrecho, codpass, preco, poltrona) VALUES (3, '2020-11-03', 2, 3, 62, 15);
INSERT INTO public.bilhetes (codreserva, dtemissao, codtrecho, codpass, preco, poltrona) VALUES (4, '2020-11-10', 5, 4, 12, 1);
INSERT INTO public.bilhetes (codreserva, dtemissao, codtrecho, codpass, preco, poltrona) VALUES (5, '2020-10-11', 5, 3, 12, 6);
INSERT INTO public.bilhetes (codreserva, dtemissao, codtrecho, codpass, preco, poltrona) VALUES (6, '2020-11-15', 5, 3, 15, 10);
INSERT INTO public.empresas (codempresa, nome, autorizacao) VALUES (51, 'Catarinense', 122);
INSERT INTO public.empresas (codempresa, nome, autorizacao) VALUES (90, 'Reunidas', 101);
INSERT INTO public.empresas (codempresa, nome, autorizacao) VALUES (88, 'Canarinho', 151);
INSERT INTO public.passageiros (codpass, nome, idade, passresponsavel) VALUES (1, 'Rui Hachy', 57, NULL);
INSERT INTO public.passageiros (codpass, nome, idade, passresponsavel) VALUES (3, 'Pedro Hacky', 15, 1);
INSERT INTO public.passageiros (codpass, nome, idade, passresponsavel) VALUES (2, 'Lorena Hachy', 32, 1);
INSERT INTO public.passageiros (codpass, nome, idade, passresponsavel) VALUES (4, 'Victor Prado', 12, 2);
INSERT INTO public.trechos (codtrecho, codempresa, "cidadeorigem ", cidadedestino) VALUES (1, 51, 'Jlle', 'POA');
INSERT INTO public.trechos (codtrecho, codempresa, "cidadeorigem ", cidadedestino) VALUES (2, 90, 'Jlle', 'Ctba');
INSERT INTO public.trechos (codtrecho, codempresa, "cidadeorigem ", cidadedestino) VALUES (3, 90, 'Ctba', 'POA');
INSERT INTO public.trechos (codtrecho, codempresa, "cidadeorigem ", cidadedestino) VALUES (4, 88, 'Ctba', 'SP');
INSERT INTO public.trechos (codtrecho, codempresa, "cidadeorigem ", cidadedestino) VALUES (5, 88, 'Ctba', 'Maring√°');
SELECT pg_catalog.setval('public.bilhetes_codreserva_seq', 6, true);
SELECT pg_catalog.setval('public.empresas_codempresa_seq', 1, false);
SELECT pg_catalog.setval('public.passageiros_codpass_seq', 4, true);
SELECT pg_catalog.setval('public.trechos_codtrecho_seq', 5, true);
ALTER TABLE ONLY public.bilhetes ADD CONSTRAINT bilhetes_pkey PRIMARY KEY (codreserva);
ALTER TABLE ONLY public.empresas ADD CONSTRAINT empresas_pkey PRIMARY KEY (codempresa);
ALTER TABLE ONLY public.passageiros ADD CONSTRAINT passageiros_pkey PRIMARY KEY (codpass);
ALTER TABLE ONLY public.trechos ADD CONSTRAINT trechos_pkey PRIMARY KEY (codtrecho);
CREATE INDEX fki_fk_responsavel ON public.passageiros USING btree (passresponsavel);
ALTER TABLE ONLY public.bilhetes ADD CONSTRAINT bilhetes_codpass_fkey FOREIGN KEY (codpass) REFERENCES public.passageiros(codpass);
ALTER TABLE ONLY public.bilhetes ADD CONSTRAINT bilhetes_codtrecho_fkey FOREIGN KEY (codtrecho) REFERENCES public.trechos(codtrecho);
ALTER TABLE ONLY public.passageiros ADD CONSTRAINT fk_responsavel FOREIGN KEY (passresponsavel) REFERENCES public.passageiros(codpass) NOT VALID;
ALTER TABLE ONLY public.trechos ADD CONSTRAINT trechos_codempresa_fkey FOREIGN KEY (codempresa) REFERENCES public.empresas(codempresa);